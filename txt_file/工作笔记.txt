41138119951016421X	18620101642	6217002440004113429
*************

<br><p style="text-align: right;">摘自《心灵鸡汤正能量励志》</p>
	
<Host name="alarm.duola.vip"  appBase="webapps"
            unpackWARs="true" autoDeploy="true">
        <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"
               prefix="localhost_access_log" suffix=".txt"
               pattern="%h %l %u %t &quot;%r&quot; %s %b" />
	<Context path="" docBase="/home/ubuntu/apache-tomcat-8.0.53/webapps/current/index0.jsp" reloadable="true"/> 
      </Host>
	  

	  
	  
<Host name="localhost"  appBase="webapps"
            unpackWARs="true" autoDeploy="true">
        <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"
               prefix="localhost_access_log" suffix=".txt"
               pattern="%h %l %u %t &quot;%r&quot; %s %b" />
	<Context path="" docBase="/home/ubuntu/apache-tomcat-8.0.53/webapps/LongBlog/" reloadable="true"/> 
</Host>

2020-04-16
1.<if test='riskNodesName.indexOf("等待") == -1 and riskNodesName.indexOf("触发") == -1 
					and riskNodesName.indexOf("退案") == -1 and riskNodesName.indexOf("结案") == -1 and riskNodesName.indexOf("中止") == -1 
					and riskNodesName.indexOf("审批不通过") == -1 and riskNodesName.indexOf("扣款成功回款") == -1 and riskNodesName.indexOf("未扣款回款") == -1 
					and riskNodesName.indexOf("他项权证解保") == -1 and riskNodesName.indexOf("保函作废解保") == -1 '>
					and exists(select * from act_ru_task art1 where art1.PROC_INST_ID_ = b.ACT_INST_ID_ and art1.NAME_ like '%${riskNodesName}%')
				</if>
2.BPM首页报表数据的设计，由于盒子位置的调换，导致出现问题。
  04-17解决办法是再次定义一个全局变量times，记录盒子对应接口执行的次数，当为6的倍数次时重新调用获取业绩信息的方法
  通过这个，对全局变量也有了一个新的认识
3. 用reset命令，可以回退到某次提交，那该提交之后的提交都会回滚，不过这种覆盖是不可逆的，之前的提交记录都没有了。所以平时开发中尽量注意
	git  reset --hard 25339f7c2470e98cda29ed74412efa91e4917dea
4.重命名git分支名称
?1、git branch -m 要改的本地分支名 修改后的分支名(修改本地分支)

?2、 git push origin :远程修改前的分支名（删除远程分支）

?3、git push origin 修改后的分支名:修改后的分支名（push 到远程分支）

?4、git branch --set-upstream? 修改后的分支名 origin/修改后的分支名（绑定远程分支）


2020-04-15
原来idea自带反编译class文件的功能，MyEclipse可能也可以
row++;//实现譬如 1、1、2、2、3、4、5、5 的排名->排名连续
row=i+1;//实现譬如 1、1、3、3、5、6、7、8 的排名->排名间断
2020-04-14
因为数据库版本问题导致65不可以直接通过XML获取排行，
在将排行的获取由XML移至方法中时，开始将返回的集合定义为List<HashMap<String,String>>这导致了某个字段比如userPerformance为double型时报错->java.lang.ClassCastException: java.lang.Double cannot be cast to java.lang.String，
后将返回类型改为List<HashMap<String,Object>> 就解决了。

2020-04-13周一
1.os_user用户表的一个手机号可能对应多条用户，因此不能通过手机号获取用户ID、机构id，所以采用多传用户ID、机构id的方式。
  而APP那边调用的时候，无法使用ContextUtil类来获取用户ID、机构id

	  
2020-04-09~~~完成BPM首页报表数据的呈现
1.银行服务费表的设计，设计时的批次ID在不同机构下也不同，比如a机构有1、2、3批次，b机构下也可以有1、2、3批次
  所以在关联服务费拓展表的时候，不能单纯的将批次ID与拓展表对应，还需要将机构也对应。
  所以系统中可能有的地方的设计是有误的，特别是报表，不过多数后面跟机构条件的是正确的。
2.使用DecimalFormat df = new DecimalFormat("0.00");df.format(double)将保留小数点后两位
3.PortalScript里的使用		
  消息盒子的模版，d表示InsMsgBoxEntity实体，url、icon、count、title、boxData是实体的属性(其中boxData是map型，有个key是solCounts)
<div class="card">
 <ol class="cardUl">
 <#list data.obj as d>
 <li class="p_top">
 <#if d.url><a href="${ctxPath}${d.url}" target="_blank"></#if>
  <#if d.url==null><a href="javascript:;"></#if>
 <div class="cardBox" url="${ctxPath}${d.url}">
 <div class="cardBox_right">
 <div class="tubiao_right">
 <span class="iconfont ${d.icon}">
</span>
 </div>
 </div>
 <div class="cardBox_left">
 <p class="num"  style="font-size:18px;">
<#if d.boxData.solCounts>${d.boxData.solCounts}</#if>
<#if d.boxData.solCounts==null>${d.count}</#if>

</p>
<br>
 <h5>
${d.title}</h5>
 </div>
 </div>
  </a>
 </li>
 </#list>
 <h1 class="clearfix">
</h1>
 </ol>
 </div>
4.Java实现千位分隔符
DecimalFormat df = new DecimalFormat("#,##0.00");
df.format(num);//实现千位分隔符

2020-04-07
1.使用对象较map的好处之一是使用对象可以方便的看到里面有哪些属性，而使用map时必须要到XML中才可以看到
2.sql中如果想要获得某条记录在所有记录中的排序，可定义变量set @xu;然后在sql中这样引用@xu:=@xu+1
3.上传图片报错：org/bouncycastle/jce/spec/ECPublicKeySpec，重启服务器可解决
4.别人将新分支推到远程后，需git pull后才能切到这个新分支，不能直接切
	  
SELECT VERSION();用于获取当前 Mysql 的版本。

2020-03-30
1.关于表单需要注意的几点
  name、id、textname(实现一个组件同时赋值或获取数据库的ID和name)都要一一对应，textfield、valuefield也要对应，
  valuefromselect="true" 不可乱加，会导致数据无法回显
  其中textname实现一个组件同时赋值或获取数据库的ID和name，textfield和valuefield来自下拉列表数据获取的接口中
2.formOperatorInfo = mini.get("grid_operator_info").getData()中并没有定义id为grid_operator_info的组件，但如果加上name为operator_info的表单却不报错，去掉却报错了。不知为什么
3. data.person_type = person_type||1;//zcl 2020 -03-30后加||1实现类别默认选中个人
2020-03-19
1.MINI的input的textfield属性的值应表示要显示在下拉列表的选项，valuefield表示下拉列表选项对应的value

2.给全职赋予了导出权限后，他的对应报表的导出按钮还是置灰状态解决办法：
需要先通过sadmin在‘机构类型’那里给按揭公司-良策网络机构赋予权限，然后再登录良策网络机构账号给全职分配权限

2020-03-13周五
1. <input name="return_case_type" id="return_case_type" class="mini-radiobuttonlist rxc"  plugins="mini-radiobuttonlist" label="return_case_type" textname="return_case_type_name" length="20" defaultvalue="" from="dic" dickey="TALX" mwidth="0" wunit="px" mheight="0" hunit="px" textfield="name" valuefield="key" />
原本return_case_type_name存不进数据库，后来在上面代码中加入from="dic" dickey="TALX"后成功存进去
2.银行放款汇总表`proc_report3_0_business_bank_summary`一直存在的一个bug，
 如下，转按的前两个sum应该调至if的外部，组合贷款等其他产品的原本做法就是正确的
SET @aroundSql = CONCAT('
SELECT F_LOAN_SUB_BANK,

if(',@sqlIfHfund,',IFNULL(sum(ROUND(',@hfundLoanAmount,'/',@unit,',2)),0),0) aroundHfundLoanAmount,-------------------此句中的sum要放到if外面
if(',@sqlIfBus,',IFNULL(sum(ROUND(',@busLoanAmount,'/',@unit,',2)),0),0) aroundBusLoanAmount,-------------------此句中的sum要放到if外面

SUM(if(',@sqlIfBus,' or ',@sqlIfHfund,',1,0)) aroundCaseCount
FROM (',@drSql,@sqlWhereO,') t1 where TYPE_ID_ = 26 group by F_LOAN_BANK,F_LOAN_SUB_BANK');


2020-03-12周四
1.数据字典的数据页面中默认设值时，要用value=，defaultvalue是不生效的，下拉列表适用、单选按钮不适用
2.是否家庭唯一住房改为“是否业主家庭唯一住房”，多加了两个字导致格式混乱问题~解决办法：调整高度，使用line-height解决两行字间距较大的问题
2020-03-11
将checkAmount函数由各表单移至bpmTaskToStart.jsp，避免多表单重复写，修改时都要修改

2020-03-02
1.数据字典中的证件类型通过执行sql语句添加后，被添加的类型没有在界面中立即显示，而且即使清除缓存后也没显示，这个时候如果不是添加错误，就考虑重启服务器
2.修改流程节点名称：在act_ge_bytearray表中以blob格式存储
修改节点名称：
更新数据库节点名称：
UPDATE `liangce_loan_bpm`.`bpm_node_jump` set NODE_NAME_='委托确认书' where NODE_NAME_='上数' and ACT_DEF_ID_='anjieyewu:6:2510000021070007';
UPDATE `liangce_loan_bpm`.`act_hi_taskinst` set name_='委托确认书' where name_='上数' and PROC_DEF_ID_='anjieyewu:6:2510000021070007';
UPDATE `liangce_loan_bpm`.`act_ru_task` set name_='委托确认书' where name_='上数' and PROC_DEF_ID_='anjieyewu:6:2510000021070007';

UPDATE `liangce_loan_bpm`.`sys_dic` set NAME_='委托确认书' where NAME_='上数';
UPDATE `liangce_loan_bpm`.`loan_nodetype` set TYPE_NAME_='委托确认书' where TYPE_NAME_='上数';
UPDATE `liangce_loan_bpm`.`bpm_form_view` set NAME_='委托确认书' where NAME_='上数';
UPDATE `liangce_loan_bpm`.`bpm_sol_fv` set NODE_TEXT_='委托确认书' where NODE_TEXT_='上数' ;
UPDATE `liangce_loan_bpm`.`bpm_sol_user` set NODE_NAME_='委托确认书' where NODE_NAME_='上数' AND ACT_DEF_ID_='anjieyewu:6:2510000021070007';


2020-02-09
因破解过idea导致idea的激活码无法使用。通过撤销原破解效果使其可以再次使用
撤销方法：将C:\Users\pc\.IntelliJIdea2018.3\config路径下的  idea64.exe.vmoptions中对jar文件的调用去掉（D盘中也有，最好也去掉）

2020-01-21
使用find_in_set与使用or
WHERE  F_STATUS = "2" or F_STATUS = "3" or F_STATUS = "4"  AND F_IS_PRIMARY = "1"  
与find_in_set(F_STATUS,"2,3,4") AND F_IS_PRIMARY = "1"  

2020-01-25
1.另一种方法实现文件上传：MultipartFile，多个文件时定义数组
2.不定义id实现css设置submit格式，.rights form input[type=submit]{
3.REST风格的网站url

412902197305064278

2019-12-18
getDetail接口问题(65正常，线上出问题)
至于昨天说的图片过多的问题，我也跟国显说了下，看看是做图片数量的限制还是从技术上解决一下？

select * from mysql.user;

update user set password=password('123456') where user='root' and host='localhost';


2019-12-16周一
1.运营原始数据表中身份证号、手机号等敏感信息脱敏，原本采用将最后面的数据使用以下sql。后来发现了个问题，就是某些身份证号字段可能不止一个身份证，
可以有多个，这个时候要多个脱敏显示，而不是只显示一个脱敏其他不显示。刚开始一直在想怎么把多个用sql的subString_index函数拆分，越想越觉得这个函数
难以实现。后来灵机一动，因为最后面的身份证号是在前面通过groupConcat拼接起来的，去在这个拼接的地方直接脱敏后再拼接就完美解决问题了。唯一的缺点
就是略显麻烦，有二十多个地方地方需要改(2000多行的sql)

--直接修改查询出来的结果
if(ifnull(owner_id,"")="","",concat(left(owner_id,5),"***************"))

concat(left(owner_id,5),"***************")



concat(left(owner_phone,3),"*****",right(owner_phone,3))


if(ifnull(main_lender_id,"")="","",concat(left(main_lender_id,5),"***************"))
concat(left(main_lender_id,5),"***************")



if(ifnull(second_lender_id,"")="","",concat(left(second_lender_id,5),"***************"))

4/5/8/4



--修改查询过程中的数据
concat(left(sb.F_PHONE,3),"*****",right(sb.F_PHONE,3))

if(ifnull(sb.F_PHONE,"")="","",concat(left(sb.F_PHONE,3),"*****",right(sb.F_PHONE,3)))


concat(left(sb.F_ORGANIZATION_PHONE,3),"*****",right(sb.F_ORGANIZATION_PHONE,3))

if(ifnull(sb.F_ORGANIZATION_PHONE,"")="","",concat(left(sb.F_ORGANIZATION_PHONE,3),"*****",right(sb.F_ORGANIZATION_PHONE,3)))

2019-12-09周一
1.银行转介表总宗数与我司+银行宗数不相等问题
show variables like 'group_concat_max_len' ;-- 查看长度

SET GLOBAL group_concat_max_len = 102400; -- 修改长度

SET SESSION group_concat_max_len=102400; -- 用session让上述改动立即生效

12-06周五

1.调用存储过程方法(以银行转介表为例)---若想得到存储过程对应的查询语句，可在存储过程尾部加上 SELECT @selectSql;
SET @a=NULL;
SET @b=NULL;
SET @c=NULL;
SET @d=NULL;
SET @e=NULL;
SET @f=NULL;
SET @g='2530000022937712';
SET @h=0;
SET @i=100;
SET @j=-1;
SET @k=1;
SET @l=null;

CALL proc_report3_0_business_statistics_BankReferral(@a,@b,@c,@d,@e,@f,@g,@h,@i,@j,@k,@l);

2.测试服运营原始数据表在sadmin正常，而统计表机构报了500，报的错是：[Err] 1292 - Truncated incorrect DOUBLE value: '商业贷款'
在数据库中调用存储过程，传入sadmin的账号正常，传统计表机构的账号也是报的这个错误。
分析后发现如下所示，下方的第二行的2、3、7没有加引号，加上引号之后就好了。但是原本2、3也没加引号就没事啊，所以太奇怪了
if(wci.F_LOAN_TYPE ="1" or wci.F_LOAN_TYPE ="3" or wci.F_LOAN_TYPE ="4" or wci.F_LOAN_TYPE ="5" or wci.F_LOAN_TYPE ="7",if(ifnull(wci.F_BUS_LOAN_AMOUNT,"")="",0,wci.F_BUS_LOAN_AMOUNT),0) busLoanAmount,
if(wci.F_LOAN_TYPE = "2" or wci.F_LOAN_TYPE ="3" or wci.F_LOAN_TYPE ="7",IF(IFNULL(wci.F_HFUND_LOAN_AMOUNT,"")="",0,wci.F_HFUND_LOAN_AMOUNT),0) hfundLoanAmount,
3.银行转介表测试服正常，验收服报500的问题，没有打印错误日志，浏览器里面就能看到个null，调用存储过程也是正常的---后来在本地连了验收服务器，发现是有些案件的部门名称为空导致的
  这个问题之前是出现过的。
4.cp -rf LongMusic $(date +%Y%m%d_%H%M%S)		该Linux命令可实现将项目复制成以当前时间命名的文件

11-28周四
1.为给APP边案件添加案件进度的筛选，了解到mybatis的一个使用点。如下必须是外面单引号，里面双引号，否则会报numberFormatException
<if test='taskNodesName=="" or taskNodesName==null or taskNodesName=="等" or taskNodesName=="等待" or taskNodesName=="等待签" or taskNodesName=="等待签约" or taskNodesName=="待" or taskNodesName=="待签"
                    or taskNodesName=="待签约"  or taskNodesName=="签" or taskNodesName=="签约" or taskNodesName=="约" '>


11-27为了解决类型为机构时仍显示人号码的问题，修改了其接口的xml文件，但后来造成了很大的问题(FlowScript中也调用了该接口，这里为机构时也取个人的号码)


11-26周二
从当前页到另一页，如何做到在另一页被关闭后返回到当前页时刷新当前页

11-25周一
如何使已有案号的APP边案件签件后不再生成案号：在前端中向Wcaseinfo中传入案号，在FlowScript的setCaseNumber脚本中添加代码



11-21周四
在将APP那边的案件使用union并到BPM的待处理列表中时，出现了字段与字段对应不上的问题，
比如“创建时间”跑到”风控产品“那里，后来想了想，又在网上搜了搜，发现union的使用不仅
要将两边的字段对应，顺序也要对应，比如：one,two,three union one,three,two就会导致数据错乱，可参见taskMgr.map.xml

11-13
关于系统参数-"aj.order.onoff"的修改：直接修改数据库和通过浏览器修改不一样，通过浏览器修改会存入缓存中，
程序中是从缓存取的，所以导致从数据库修改效果一点儿也没改。



2019091100001
签约	1
案件配置	2
评估	3
跟件	4
录入	5
审核	6
递件	7
派单	8
网签	9
公证	10
复核	11
银行审批	12
终评	13
合同	14
预约递件	15
审核递件	16
送放款	19
放款	20
结案	21
业务审批	22
委托确认书	23


IDEA快捷键：
1.Alt+上键/下键可快速切换类中的方法
2.双击Enter可唤起文件查找窗口
3.Ctrl+Z撤销，Ctrl+Shift+Z取消撤销


2019-10-23
签件界面选择组合贷款时出现rollback错误

2019-10-17
eclipse或Myeclipse中web项目没有run on server
刷新web项目，在项目->右击->Properties->Project Facets->Modify Project，选择Java和Dynamic Web Module。点击ok关闭。




解决tomcat控制台乱码问题

打开tomcat/conf/logging.properties
找到java.util.logging.ConsoleHandler.encoding = UTF-8
修改为java.util.logging.ConsoleHandler.encoding = GBK


2019-10-11
指派的效果没有达到，并不是因为只改了bpm_inst_user没改act_ru_task。
而是只改了bpm_inst_user中的派单节点的用户，没有改递件节点。所以指派后的递件人员还是原本的

目前采用前端传递件的nodeid而非派单的

2019-10-10
担保业务占比选择全部产品后报json is error以及500。
是因为全部产品字段超过1000，而存储过程设置的是1000，改为10000后就好了

2019-10-08
不知道怎么回事，在本地运行出现了部分乱码（主要为js和css代码）的情况。数据也加载不出来
后经关荣帮忙找到是tomcat版本的问题，从tomcat8改为tomcat8Custom(自己配置的)后问题解决


6.
09-18银行转介表的总宗数与银行和我司宗数和相差较多，是group_concat拼接ID时导致的
数据库：GROUP_CONCAT 这个词是有默认长度的，最大1024，如果拼接的长度过长，就会被自动截取，所以需要修改数据库配置文件，把长度设大一点

5.
09-18送审汇总表的合计项突然消失了，关荣帮忙找到问题所在并解决：界面中typeId未删除，导致查询总和时传了typeId，而数据库中并无该typeID对应数据

4.送审明细表合计项开发、测试、验收均正常，但65上却出现都为0的情况。应该是数据类型使用double的原因，应用BigDecimal

1.报表在做合计项时出现合计项时而出现时而消失的情况

2.用户根据工作职责搜索时，因工作职责搜索条件可多选，只要满足一个的用户就应该搜索出来
比如搜索条件选择签约、评估、复核；数据库中某用户的职责为：签约、跟件，他就应该被搜索出来

3.报表的类型设置中出现有时黄总数据保存后为空的情况。后来分析后是如果进入后黄总的数据不动的话，就会默认被清除。然后相继解决掉了。







启动tomcat权限不够解决办法

在tomcat所在目录下使用命令：sudo chmod -R 777 apache-tomcat-8.0.53

 source /etc/profile
 
 
 
 tar.xz解压为tar
 xz -d mysql-8.0.17-linux-glibc2.12-i686.tar.xz
 解压tar
 tar xvf mysql-8.0.17-linux-glibc2.12-i686.tar
 
 df	占用
 du -sh *	列出文件占用空间
 
 rpm -qa | grep -i mysql
 
 使用软链接指向到：	ln -s /usr/local/mysql/mysql.sock /tmp/mysql.sock
 